<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">

    <title>Theme Template for Bootstrap</title>

    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="example-style.css" rel="stylesheet">

  </head>

  <body role="document">

    <div class="container theme-showcase" role="main">
      <div class="jumbotron text-center">
        <h1>Opt-out example</h1>
        <p>This example informs the user that cookies are used on this website. Instead of simply informing the user that cookies are used, they are told that cookies are enabled by default, but they can opt-out from using cookies now or later. This is a good way to be compliant with the cookie consent law.</p>

        <p>This still only applies for cookies that can personally identify you. (You must still specify all the cookies used on your website in the cookie policy)</p>

        <div id="cookie-widget">
          <h2>Cookie-using Widget<h2>
          <p id="cookie-widget-inner"></p>
        </div>
      </div>

      <p class="text-center btn-xl">
        <button id="btn-clear-cookie" type="button" class="btn btn-primary" style="display:none">Clear previous answer</button>
        <button id="btn-next-example" type="button" class="btn btn-success">Next example</button>
      </p>

    </div>

  </body>
</html>

<script src="../cookieconsent.js"></script>
<script>

  var options = {
    theme: '../build/light-floating.css',

    explicit: true,

    // hide the "clear" button when we don't need it (when there is nothing to clear)
    onComplete: function (status){
      // init widget
      var allowed = status != cookieconsent.COOKIE_STATUS.DENIED;
      runWidget(allowed ? 'allowed' : 'denied');

      // show button if status is cleared
      btnClear.style.display = status ? '' : 'none';
    },
  };

  var btnNext = document.getElementById('btn-next-example');
  var btnClear = document.getElementById('btn-clear-cookie');

  btnClear.onclick = function () {
    btnClear.style.display = 'none';

    cookieconsent.popup.clearStatus();
    cookieconsent.popup.open();

    runWidget('allowed');
  };

  btnNext.onclick = function () {
    window.location = 'example-3-opt-in.html';
  };

  // The consent method is "opt-out", so we assume they consent unless they click "deny"
  runWidget('allowed');

  cookieconsent.oldinit(options);

  // This function simulates the running of the widget
  function runWidget(consent) {
    var w = document.getElementById('cookie-widget-inner');
    switch(consent) {
      case 'allowed': w.innerHTML = 'We are using your cookies right now!'; break;
      case 'denied' : w.innerHTML = 'We have been denied access to your cookies!'; break;
      case 'waiting': w.innerHTML = 'We are waiting to see if we can use your cookies'; break;
    }
  }

</script>
